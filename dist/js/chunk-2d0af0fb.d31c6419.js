(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af0fb"],{"0d5f":function(e,t,c){"use strict";c.r(t);var l=c("7a23"),a={class:"container py-4"},n={class:"bg-white px-4 border"},o=Object(l["createElementVNode"])("div",{class:"navbar py-3"},[Object(l["createElementVNode"])("div",{class:"container-fluid"},[Object(l["createElementVNode"])("span",{class:"navbar-brand"},"訂單管理")])],-1),r={class:"table-responsive mb-3"},d={class:"table table-hover align-middle mb-0"},i=Object(l["createElementVNode"])("thead",{class:"bg-gray-000"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"position-relative"},"購買時間"),Object(l["createElementVNode"])("th",{class:"position-relative"},"Email"),Object(l["createElementVNode"])("th",{class:"position-relative col-4"},"購買款項"),Object(l["createElementVNode"])("th",{class:"position-relative"},"應付金額"),Object(l["createElementVNode"])("th",{class:"position-relative"},"是否付款"),Object(l["createElementVNode"])("th",{class:"col-1"},"編輯")])],-1),s=["textContent"],b={class:"list-unstyled my-0"},m={class:"text-end"},O={class:"form-check form-switch"},p=["id","onUpdate:modelValue","onChange"],j=["for"],u={key:0},E={key:1},h={class:"btn-group"},V=["onClick"],N=["onClick"];function k(e,t,c,k,g,f){var y=Object(l["resolveComponent"])("Loading"),v=Object(l["resolveComponent"])("Pagination"),B=Object(l["resolveComponent"])("OrderModal"),D=Object(l["resolveComponent"])("DelModal");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createVNode"])(y,{active:g.isLoading,"z-index":1600},null,8,["active"]),Object(l["createElementVNode"])("div",a,[Object(l["createElementVNode"])("div",n,[o,Object(l["createElementVNode"])("div",r,[Object(l["createElementVNode"])("table",d,[i,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(g.orders,(function(t,c){return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:c},[g.orders.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:0,class:Object(l["normalizeClass"])({"text-secondary":!t.is_paid})},[Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(l["createElementVNode"])("td",null,[t.user?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,textContent:Object(l["toDisplayString"])(t.user.email)},null,8,s)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("ul",b,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.products,(function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t},Object(l["toDisplayString"])(e.product.title)+" 數量："+Object(l["toDisplayString"])(e.qty)+" "+Object(l["toDisplayString"])(e.product.unit),1)})),128))])]),Object(l["createElementVNode"])("td",m,Object(l["toDisplayString"])(t.total),1),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",O,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return f.updatePaid(t)}},null,40,p),[[l["vModelCheckbox"],t.is_paid]]),Object(l["createElementVNode"])("label",{class:"form-check-label",for:"paidSwitch".concat(t.id)},[t.is_paid?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",u,"已付款")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",E,"未付款"))],8,j)])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",h,[Object(l["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(e){return f.openModal("edit",t)}}," 編輯 ",8,V),Object(l["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(e){return f.openModal("delete",t)}}," 刪除 ",8,N)])])],2)):Object(l["createCommentVNode"])("",!0)],64)})),128))])])]),Object(l["createVNode"])(v,{pages:g.pagination,onEmitPage:f.getOrders},null,8,["pages","onEmitPage"])])]),Object(l["createVNode"])(B,{order:g.tempOrder,ref:"orderModal",onUpdatePaid:f.updatePaid},null,8,["order","onUpdatePaid"]),Object(l["createVNode"])(D,{ref:"delModal",onDelItem:f.delOrder},null,8,["onDelItem"])])}var g=c("5530"),f=(c("99af"),c("590b")),y=(c("b0c0"),{id:"oderModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"oderModalLabel","aria-hidden":"true","data-bs-backdrop":"static"}),v={class:"modal-dialog modal-xl modal-dialog-scrollable"},B={class:"modal-content  border-0"},D=Object(l["createElementVNode"])("div",{class:"modal-header"},[Object(l["createElementVNode"])("h3",{id:"exampleModalLabel",class:"modal-title"},[Object(l["createElementVNode"])("span",null,"訂單細節")]),Object(l["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),x={class:"modal-body"},M={class:"row"},C={class:"col-md-4"},S=Object(l["createElementVNode"])("h5",null,"用戶資料",-1),w={class:"table"},P={key:0},_=Object(l["createElementVNode"])("th",{style:{width:"100px"}},"姓名",-1),L=Object(l["createElementVNode"])("th",null,"Email",-1),$=Object(l["createElementVNode"])("th",null,"電話",-1),U=Object(l["createElementVNode"])("th",null,"地址",-1),F={class:"col-md-8"},q=Object(l["createElementVNode"])("h5",null,"訂單細節",-1),z={class:"table"},I=Object(l["createElementVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),J=Object(l["createElementVNode"])("th",null,"下單時間",-1),A=Object(l["createElementVNode"])("th",null,"付款時間",-1),G={key:0},H={key:1},K=Object(l["createElementVNode"])("th",null,"付款狀態",-1),Q={key:0,class:"text-success"},R={key:1,class:"text-muted"},T=Object(l["createElementVNode"])("th",null,"總金額",-1),W=Object(l["createElementVNode"])("h5",null,"選購商品",-1),X={class:"table"},Y=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr")],-1),Z={class:"text-end"},ee={class:"d-flex justify-content-end mb-3"},te={class:"form-check"},ce={class:"form-check-label",for:"flexCheckDefault"},le={key:0},ae={key:1},ne={class:"modal-footer"},oe=Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary me-3","data-bs-dismiss":"modal"}," 取消 ",-1);function re(e,t,c,a,n,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",y,[Object(l["createElementVNode"])("div",v,[Object(l["createElementVNode"])("div",B,[D,Object(l["createElementVNode"])("div",x,[Object(l["createElementVNode"])("div",M,[Object(l["createElementVNode"])("div",C,[S,Object(l["createElementVNode"])("table",w,[n.tempOrder.user?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tbody",P,[Object(l["createElementVNode"])("tr",null,[_,Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(n.tempOrder.user.name),1)]),Object(l["createElementVNode"])("tr",null,[L,Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(n.tempOrder.user.email),1)]),Object(l["createElementVNode"])("tr",null,[$,Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(n.tempOrder.user.tel),1)]),Object(l["createElementVNode"])("tr",null,[U,Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(n.tempOrder.user.address),1)])])):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",F,[q,Object(l["createElementVNode"])("table",z,[Object(l["createElementVNode"])("tbody",null,[Object(l["createElementVNode"])("tr",null,[I,Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(n.tempOrder.id),1)]),Object(l["createElementVNode"])("tr",null,[J,Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.$filters.date(n.tempOrder.create_at)),1)]),Object(l["createElementVNode"])("tr",null,[A,Object(l["createElementVNode"])("td",null,[n.tempOrder.paid_date?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",G,Object(l["toDisplayString"])(e.$filters.date(n.tempOrder.paid_date)),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",H,"時間不正確"))])]),Object(l["createElementVNode"])("tr",null,[K,Object(l["createElementVNode"])("td",null,[n.tempOrder.is_paid?(Object(l["openBlock"])(),Object(l["createElementBlock"])("strong",Q,"已付款")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",R,"尚未付款"))])]),Object(l["createElementVNode"])("tr",null,[T,Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.$filters.currency(n.tempOrder.total)),1)])])]),W,Object(l["createElementVNode"])("table",X,[Y,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(n.tempOrder.products,(function(t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t.id},[Object(l["createElementVNode"])("th",null,Object(l["toDisplayString"])(t.product.title),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(t.qty)+" / "+Object(l["toDisplayString"])(t.product.unit),1),Object(l["createElementVNode"])("td",Z,Object(l["toDisplayString"])(e.$filters.currency(t.final_total)),1)])})),128))])]),Object(l["createElementVNode"])("div",ee,[Object(l["createElementVNode"])("div",te,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[0]||(t[0]=function(e){return n.tempOrder.is_paid=e})},null,512),[[l["vModelCheckbox"],n.tempOrder.is_paid]]),Object(l["createElementVNode"])("label",ce,[n.tempOrder.is_paid?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",le,"已付款")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",ae,"未付款"))])])])])])]),Object(l["createElementVNode"])("div",ne,[oe,Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(t){return e.$emit("update-paid",n.tempOrder)})}," 確認 ")])])])],512)}var de=c("e0ae"),ie={mixins:[de["a"]],emits:["update-paid"],props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",tempOrder:{},isPaid:!1}},watch:{order:function(){this.tempOrder=Object(g["a"])({},this.order)}}};ie.render=re;var se=ie,be=c("d4a2"),me={components:{DelModal:f["a"],Pagination:be["a"],OrderModal:se},inject:["httpMessageState"],data:function(){return{isLoading:!1,pagination:[],currentPage:1,orders:[],tempOrder:{}}},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=t,this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("haohao","/admin/orders?page=").concat(t);this.$http.get(c,this.tempProduct).then((function(t){e.orders=t.data.orders,e.pagination=t.data.pagination,e.isLoading=!1}))},openModal:function(e,t){this.tempOrder=Object(g["a"])({},t),"edit"===e?this.$refs.orderModal.openModal():"delete"===e&&this.$refs.delModal.openModal()},updatePaid:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("haohao","/admin/order/").concat(e.id),l={is_paid:e.is_paid},a="更新付款狀態";this.$http.put(c,{data:l}).then((function(e){t.getOrders(t.currentPage),t.isLoading=!1,t.$refs.orderModal.hideModal(),t.httpMessageState(e,a)}))},delOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("haohao","/admin/order/").concat(this.tempOrder.id);this.isLoading=!0,this.$http.delete(t).then((function(){e.getOrders(e.currentPage),e.isLoading=!1,e.$refs.delModal.hideModal()}))}},created:function(){this.getOrders()}};me.render=k;t["default"]=me}}]);
//# sourceMappingURL=chunk-2d0af0fb.d31c6419.js.map