(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7627d3f2"],{"0954":function(e,t,c){},"0d5f":function(e,t,c){"use strict";c.r(t);var a=c("7a23");Object(a["pushScopeId"])("data-v-5a79a104");var l={class:"container py-4"},n={class:"bg-white px-4 border"},o=Object(a["createElementVNode"])("div",{class:"navbar py-3"},[Object(a["createElementVNode"])("div",{class:"container-fluid"},[Object(a["createElementVNode"])("span",{class:"navbar-brand"},"訂單管理")])],-1),r={class:"table-responsive mb-3"},d={class:"table table-hover align-middle mb-0"},i=Object(a["createElementVNode"])("thead",{class:"bg-gray-000"},[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",{class:"position-relative",width:"128"},"下單日期"),Object(a["createElementVNode"])("th",{class:"position-relative"},"訂單編號"),Object(a["createElementVNode"])("th",{class:"position-relative"},"商品"),Object(a["createElementVNode"])("th",{class:"position-relative",width:"128"},"應付金額"),Object(a["createElementVNode"])("th",{class:"position-relative",width:"128"},"狀態"),Object(a["createElementVNode"])("th",{width:"128"},"編輯")])],-1),s={class:"list-unstyled my-0"},b={class:"form-check form-switch"},m=["id","onUpdate:modelValue","onChange"],p=["for"],O={key:0},u={key:1},j={class:"btn-group"},E=["onClick"],h=["onClick"];function V(e,t,c,V,N,g){var f=Object(a["resolveComponent"])("Loading"),y=Object(a["resolveComponent"])("Pagination"),v=Object(a["resolveComponent"])("OrderModal"),k=Object(a["resolveComponent"])("DelModal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createVNode"])(f,{active:N.isLoading,"z-index":1060},null,8,["active"]),Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",n,[o,Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("table",d,[i,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(N.orders,(function(t,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:c},[N.orders.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:0,class:Object(a["normalizeClass"])({"text-gray-500 fw-light":!t.is_paid})},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.id.substr(1)),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("ul",s,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(t.products,(function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t},Object(a["toDisplayString"])(e.product.title)+" 數量："+Object(a["toDisplayString"])(e.qty)+" "+Object(a["toDisplayString"])(e.product.unit),1)})),128))])]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.currency(t.total)),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",b,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return g.updatePaid(t)}},null,40,m),[[a["vModelCheckbox"],t.is_paid]]),Object(a["createElementVNode"])("label",{class:"form-check-label",for:"paidSwitch".concat(t.id)},[t.is_paid?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",O,"付款")):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",u,"未付款"))],8,p)])]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(e){return g.openModal("edit",t)}}," 編輯 ",8,E),Object(a["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(e){return g.openModal("delete",t)}}," 刪除 ",8,h)])])],2)):Object(a["createCommentVNode"])("",!0)],64)})),128))])])]),Object(a["createVNode"])(y,{pages:N.pagination,onEmitPage:g.getOrders},null,8,["pages","onEmitPage"])])]),Object(a["createVNode"])(v,{order:N.tempOrder,ref:"orderModal",onUpdatePaid:g.updatePaid},null,8,["order","onUpdatePaid"]),Object(a["createVNode"])(k,{origin:N.pageName,delItem:N.tempOrder.id,ref:"delModal",onDelItem:g.delOrder},null,8,["origin","delItem","onDelItem"])])}Object(a["popScopeId"])();var N=c("5530"),g=(c("99af"),c("590b"));c("b0c0");Object(a["pushScopeId"])("data-v-144c880e");var f={id:"oderModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"oderModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},y={class:"modal-dialog modal-lg modal-dialog-scrollable"},v={class:"modal-content  border-0"},k=Object(a["createElementVNode"])("div",{class:"modal-header"},[Object(a["createElementVNode"])("h3",{id:"exampleModalLabel",class:"modal-title"},[Object(a["createElementVNode"])("span",null,"編輯訂單")]),Object(a["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),B={class:"modal-body"},S={class:"mb-4"},w=Object(a["createElementVNode"])("h5",null,"客戶資訊",-1),M={class:"pb-2 w-100"},_={class:"table m-0"},D={key:0},x=Object(a["createElementVNode"])("th",{style:{width:"100px"}},"姓名",-1),C=Object(a["createElementVNode"])("th",null,"Email",-1),P=Object(a["createElementVNode"])("th",null,"電話",-1),L=Object(a["createElementVNode"])("th",null,"地址",-1),$={class:"mb-4"},I=Object(a["createElementVNode"])("h5",null,"訂單資訊",-1),U={class:"pb-2 w-100"},F={class:"table m-0"},q=Object(a["createElementVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),z=Object(a["createElementVNode"])("th",null,"下單日期",-1),J=Object(a["createElementVNode"])("th",null,"付款日期",-1),R={key:0},A={key:1},G=Object(a["createElementVNode"])("th",null,"狀態",-1),H={key:0,class:"text-success"},K={key:1,class:"text-gray-500"},Q=Object(a["createElementVNode"])("th",null,"應付金額",-1),T={class:"mb-4"},W=Object(a["createElementVNode"])("h5",null,"訂單明細",-1),X={class:"pb-2 mw-100"},Y={class:"table m-0"},Z={style:{"white-space":"normal"}},ee={class:"col-1"},te={class:"col-1 text-end"},ce={class:"mb-3"},ae=Object(a["createElementVNode"])("h5",null,"付款狀態",-1),le={class:"row g-3 p-2"},ne={class:"col"},oe={for:"isEnabled1",class:"d-inline-block py-2 me-2"},re=Object(a["createElementVNode"])("span",{class:"px-2"}," 開啟 ",-1),de={for:"isEnabled0",class:"d-inline-block py-2 me-2"},ie=Object(a["createElementVNode"])("span",{class:"px-2"}," 關閉 ",-1),se={class:"modal-footer"},be=Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary me-3","data-bs-dismiss":"modal"}," 取消 ",-1);function me(e,t,c,l,n,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",f,[Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("div",v,[k,Object(a["createElementVNode"])("div",B,[Object(a["createElementVNode"])("section",S,[w,Object(a["createElementVNode"])("div",M,[Object(a["createElementVNode"])("table",_,[n.tempOrder.user?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tbody",D,[Object(a["createElementVNode"])("tr",null,[x,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(n.tempOrder.user.name),1)]),Object(a["createElementVNode"])("tr",null,[C,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(n.tempOrder.user.email),1)]),Object(a["createElementVNode"])("tr",null,[P,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(n.tempOrder.user.tel),1)]),Object(a["createElementVNode"])("tr",null,[L,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(n.tempOrder.user.address),1)])])):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createElementVNode"])("section",$,[I,Object(a["createElementVNode"])("div",U,[Object(a["createElementVNode"])("table",F,[Object(a["createElementVNode"])("tbody",null,[Object(a["createElementVNode"])("tr",null,[q,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(n.tempOrder.id),1)]),Object(a["createElementVNode"])("tr",null,[z,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(n.tempOrder.create_at)),1)]),Object(a["createElementVNode"])("tr",null,[J,Object(a["createElementVNode"])("td",null,[n.tempOrder.paid_date?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",R,Object(a["toDisplayString"])(e.$filters.date(n.tempOrder.paid_date)),1)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",A,"時間不正確"))])]),Object(a["createElementVNode"])("tr",null,[G,Object(a["createElementVNode"])("td",null,[n.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createElementBlock"])("strong",H,"已付款")):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",K,"尚未付款"))])]),Object(a["createElementVNode"])("tr",null,[Q,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.currency(n.tempOrder.total)),1)])])])])]),Object(a["createElementVNode"])("section",T,[W,Object(a["createElementVNode"])("div",X,[Object(a["createElementVNode"])("table",Y,[Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.tempOrder.products,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t.id},[Object(a["createElementVNode"])("th",Z,Object(a["toDisplayString"])(t.product.title),1),Object(a["createElementVNode"])("td",ee,Object(a["toDisplayString"])(t.qty)+" / "+Object(a["toDisplayString"])(t.product.unit),1),Object(a["createElementVNode"])("td",te,Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1)])})),128))])])])]),Object(a["createElementVNode"])("section",ce,[ae,Object(a["createElementVNode"])("div",le,[Object(a["createElementVNode"])("div",ne,[Object(a["createElementVNode"])("label",oe,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{id:"isEnabled1",class:"form-check-input",type:"radio","onUpdate:modelValue":t[0]||(t[0]=function(e){return n.tempOrder.is_paid=e}),value:"true"},null,512),[[a["vModelRadio"],n.tempOrder.is_paid]]),re]),Object(a["createElementVNode"])("label",de,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{id:"isEnabled0",class:"form-check-input",type:"radio","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.tempOrder.is_paid=e}),value:"false"},null,512),[[a["vModelRadio"],n.tempOrder.is_paid]]),ie])])])])]),Object(a["createElementVNode"])("div",se,[be,Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.$emit("update-paid",n.tempOrder)})}," 確認 ")])])])],512)}Object(a["popScopeId"])();var pe=c("e0ae"),Oe={mixins:[pe["a"]],emits:["update-paid"],props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",tempOrder:{is_paid:""},isPaid:!1}},watch:{order:function(){this.tempOrder=Object(N["a"])({},this.order)},"tempOrder.is_paid":{handler:function(){"true"===this.tempOrder.is_paid?this.tempOrder.is_paid=!0:"false"===this.tempOrder.is_paid&&(this.tempOrder.is_paid=!1)},deep:!0}}};c("476e");Oe.render=me,Oe.__scopeId="data-v-144c880e";var ue=Oe,je=c("d4a2"),Ee={components:{DelModal:g["a"],Pagination:je["a"],OrderModal:ue},inject:["httpMessageState"],data:function(){return{pageName:"訂單",isLoading:!1,pagination:[],currentPage:1,orders:[],tempOrder:{id:""}}},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.currentPage=t;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("haohao","/admin/orders?page=").concat(t);this.$http.get(c,this.tempProduct).then((function(t){e.orders=t.data.orders,e.pagination=t.data.pagination,e.isLoading=!1}))},openModal:function(e,t){this.tempOrder=Object(N["a"])({},t),"edit"===e?this.$refs.orderModal.openModal():"delete"===e&&this.$refs.delModal.openModal()},updatePaid:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("haohao","/admin/order/").concat(e.id),a={is_paid:e.is_paid},l="更新付款狀態";this.$http.put(c,{data:a}).then((function(e){t.getOrders(t.currentPage),t.isLoading=!1,t.$refs.orderModal.hideModal(),t.httpMessageState(e,l)}))},delOrder:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("haohao","/admin/order/").concat(this.tempOrder.id);this.$http.delete(t).then((function(t){e.getOrders(e.currentPage),e.isLoading=!1,e.httpMessageState(t,"刪除訂單"),e.$refs.delModal.hideModal()}))}},created:function(){this.getOrders()}};c("72ef");Ee.render=V,Ee.__scopeId="data-v-5a79a104";t["default"]=Ee},"476e":function(e,t,c){"use strict";c("0954")},"72ef":function(e,t,c){"use strict";c("7491")},7491:function(e,t,c){}}]);
//# sourceMappingURL=chunk-7627d3f2.4046abea.js.map